From 9aee020368db81fad07ded7354342704065ac151 Mon Sep 17 00:00:00 2001
From: Frank Baele <frank.baele@xio.be>
Date: Fri, 13 Dec 2013 18:52:35 +0100
Subject: [PATCH] basic grunt setup

---
 .gitignore      | 18 ++++++++++++++-
 Gruntfile.js    | 68 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 _sass/config.rb | 28 ------------------------
 config.rb       | 27 +++++++++++++++++++++++
 package.json    | 12 ++++++++++
 5 files changed, 124 insertions(+), 29 deletions(-)
 create mode 100644 Gruntfile.js
 delete mode 100644 _sass/config.rb
 create mode 100644 config.rb
 create mode 100644 package.json

diff --git a/.gitignore b/.gitignore
index 6eaf9b1..afc2010 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,2 +1,18 @@
 www
-.sass-cache
+# Ignore system files
+.DS_Store
+Thumbs.db
+
+# Ignore NetBeans, Eclipse && phpstorm
+nbproject
+.project
+.settings
+.idea
+
+# Ignore sass-cache files.
+*.sass-cache*
+
+# Node stuff
+.grunt
+npm-debug.log
+node_modules
\ No newline at end of file
diff --git a/Gruntfile.js b/Gruntfile.js
new file mode 100644
index 0000000..4f89d9c
--- /dev/null
+++ b/Gruntfile.js
@@ -0,0 +1,68 @@
+module.exports = function (grunt) {
+  "use strict";
+
+  // Config...
+  grunt.initConfig({
+    pkg: grunt.file.readJSON('package.json'),
+    connect: {
+      server: {
+        options: {
+          port: 9001,
+          // Prevents Grunt to close just after the task (starting the server) completes
+          // This will be removed later as `watch` will take care of that
+          keepalive: false,
+          hostname: '',
+        }
+      }
+    },
+    watch: {
+      options: {
+        livereload: true,
+      },
+      html: {
+        files: ['**/*.html', '!_www/**/*.html'],
+        tasks: ['jekyll:build']
+      },
+      css: {
+        files: ['./_sass/**/*.scss'],
+        tasks: ['compass:dev', 'jekyll:build']
+      }
+    },
+    compass: {
+      dev: {
+        options: {
+          sassDir: './_sass',
+          cssDir: './css',
+          environment: 'development'
+        }
+      },
+      prod: {
+        options: {
+          sassDir: './sass',
+          cssDir: './css',
+          environment: 'production',
+          force: true
+        }
+      }
+    },
+    jekyll: {                             // Task
+      options: {                          // Universal options
+        dest: './www'
+      }
+    }
+  });
+
+
+  // Load tasks...
+  grunt.loadNpmTasks('grunt-contrib-watch');
+  grunt.loadNpmTasks('grunt-contrib-compass');
+  grunt.loadNpmTasks('grunt-contrib-connect');
+  grunt.loadNpmTasks('grunt-jekyll');
+  grunt.registerTask('serve', [
+    'connect',
+    'watch'
+  ]);
+  grunt.registerTask('prod', [
+    'compass:prod'
+  ]);
+};
diff --git a/_sass/config.rb b/_sass/config.rb
deleted file mode 100644
index 6d13ff8..0000000
--- a/_sass/config.rb
+++ /dev/null
@@ -1,28 +0,0 @@
-# Require any additional compass plugins here.
-require 'susy'
-require 'toolkit'
-require 'respond-to'
-require 'compass-normalize'
-
-# Set this to the root of your project when deployed:
-http_path = "/"
-css_dir = "../css"
-sass_dir = "./"
-images_dir = "../images"
-javascripts_dir = "../javascript"
-
-# You can select your preferred output style here (can be overridden via the command line):
-# output_style = :expanded or :nested or :compact or :compressed
-
-# To enable relative paths to assets via compass helper functions. Uncomment:
-relative_assets = true
-
-# To disable debugging comments that display the original location of your selectors. Uncomment:
-# line_comments = false
-
-
-# If you prefer the indented syntax, you might want to regenerate this
-# project again passing --syntax sass, or you can uncomment this:
-# preferred_syntax = :sass
-# and then run:
-# sass-convert -R --from scss --to sass sass scss && rm -rf sass && mv scss sass
diff --git a/config.rb b/config.rb
new file mode 100644
index 0000000..2a98b09
--- /dev/null
+++ b/config.rb
@@ -0,0 +1,27 @@
+# Require any additional compass plugins here.
+require 'susy'
+require 'respond-to'
+require 'compass-normalize'
+
+# Set this to the root of your project when deployed:
+http_path = "/"
+css_dir = "../css"
+sass_dir = "./"
+images_dir = "../images"
+javascripts_dir = "../javascript"
+
+# You can select your preferred output style here (can be overridden via the command line):
+output_style = (environment == :production) ? :compressed : :expanded
+
+# To enable relative paths to assets via compass helper functions. Uncomment:
+relative_assets = true
+
+# To disable debugging comments that display the original location of your selectors. Uncomment:
+# line_comments = false
+
+
+# If you prefer the indented syntax, you might want to regenerate this
+# project again passing --syntax sass, or you can uncomment this:
+# preferred_syntax = :sass
+# and then run:
+# sass-convert -R --from scss --to sass sass scss && rm -rf sass && mv scss sass
diff --git a/package.json b/package.json
new file mode 100644
index 0000000..f2f7b9f
--- /dev/null
+++ b/package.json
@@ -0,0 +1,12 @@
+{
+  "name": "panama",
+  "version": "0.0.1",
+  "devDependencies": {
+    "grunt": "~0.4.1",
+    "grunt-contrib-connect": "~0.5.0",
+    "path": "~0.4.9",
+    "grunt-contrib-watch": "~0.5.3",
+    "grunt-contrib-compass": "~0.6.0",
+    "grunt-jekyll": "~0.4.1"
+  }
+}
-- 
1.7.11.1

